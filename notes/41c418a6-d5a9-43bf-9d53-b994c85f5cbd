:PROPERTIES:
:ID:       41c418a6-d5a9-43bf-9d53-b994c85f5cbd
:END:
#+title: HTTP
#+filetags: 计网

* HTTP 和连接
一个连接是由传输层来控制的，这从根本上不属于 HTTP 的范围。
HTTP 并不需要其底层的传输层协议是面向连接的，只需要它是可靠的，或不丢失消息的（至少返回错误）。
在互联网中，有两个最常用的传输层协议：TCP 是可靠的，而 UDP 不是。
因此，HTTP 依赖于面向连接的 TCP 进行消息传递，但连接并不是必须的。

* HTTP Cookies
HTTP Cookie（也叫 Web Cookie 或浏览器 Cookie）是服务器发送到用户浏览器并保存在本地的一小块数据。
浏览器会存储 cookie 并在下次向同一服务器再发起请求时携带并发送到服务器上。
通常，它用于告知服务端两个请求是否来自同一浏览器——如保持用户的登录状态。
Cookie 使基于无状态的 HTTP 协议记录稳定的状态信息成为了可能。

Cookie 主要用于以下三个方面：

1. 会话状态管理
   如用户登录状态、购物车、游戏分数或其他需要记录的信息
2. 个性化设置
   如用户自定义设置、主题和其他设置
3. 浏览器行为跟踪
   如跟踪分析用户行为等

Cookie 曾一度用于客户端数据的存储，因当时并没有其他合适的存储办法而作为唯一的存储手段，但现在推荐使用现代存储 API。
由于服务器指定 Cookie 后，浏览器的每次请求都会携带 Cookie 数据，会带来额外的性能开销（尤其是在移动环境下）。
新的浏览器 API 已经允许开发者直接将数据存储到本地


* Session
Session是服务器端使用的一种记录客户端状态的机制，相应的也增加了服务器的存储压力。

Session保存在服务器上

** Session 的生命周期
Session在用户第一次访问服务器的时候自动创建

Session生成后，只要用户继续访问，服务器就会更新Session的最后访问时间，并维护该Session

为防止内存溢出，服务器会把长时间内没有活跃的Session从内存删除。这个时间就是Session的超时时间。
如果超过了超时时间没访问过服务器，Session就自动失效了。
